<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Departure - Aryorespati Xavier Sastrowardoyo</title>
  <link
    href="https://fonts.googleapis.com/css2?family=VT323&display=swap"
    rel="stylesheet"
  />
  <style>
    body {
      background-color: black;
      color: white;
      font-family: "VT323", monospace;
      text-align: center;
      padding: 50px;
    }

    .departure-board {
      display: block;
      width: 90%;
      max-width: 1200px;
      margin: auto;
      background: #222;
      padding: 20px;
      border-radius: 10px;
      box-shadow: 0px 0px 10px rgba(255, 255, 255, 0.2);
      font-size: 32px; /* Base font size for large screens */
    }

    .board-header {
      font-size: 36px;
      margin-bottom: 20px;
    }

    .board-row {
      display: flex;
      justify-content: space-between;
      padding: 15px 30px;
      border-bottom: 1px solid #555;
      letter-spacing: 2px;
      /* Let each row remain in one horizontal line if there's enough space */
      min-width: 700px;
    }

    .board-row span {
      flex: 1;
      text-align: left;
    }

    .board-row.fake {
      background-color: darkblue;
      cursor: pointer;
    }

    /* Status text colors */
    .status {
      color: yellow;
    }
    .status.delayed {
      color: red;
    }
    .status.canceled {
      color: red;
    }
    .status.open {
      color: green;
    }
    .status.boarding {
      color: orange;
    }
    .status.checkin {
      color: cyan;
    }
    .status.departure {
      color: lightblue;
    }

    /* Typewriter animation */
    @keyframes typewriter {
      0% {
        max-width: 0;
      }
      100% {
        max-width: 100%;
      }
    }
    .typewriter {
      display: inline-block;
      overflow: hidden;
      white-space: nowrap;
      border-right: 3px solid yellow;
      animation: typewriter 2s steps(20, end) forwards;
      text-align: left !important;
    }

    /* -------------------------
       FIRST BREAKPOINT
       Medium Screens: 
       Slightly shrink font and spacing 
       so columns still fit if possible
       ------------------------- */
    @media (max-width: 900px) {
      body {
        padding: 30px;
      }
      .departure-board {
        font-size: 26px; /* reduce from 32px */
        padding: 15px;
      }
      .board-header {
        font-size: 30px; /* reduce from 36px */
      }
      .board-row {
        padding: 10px 20px;
        letter-spacing: 1px; /* slightly reduce spacing */
        min-width: 600px; /* narrower row min-width to fit smaller screens */
      }
    }

    /* -------------------------
       SECOND BREAKPOINT
       Very Small Screens: 
       Further shrink font & enable 
       horizontal scrolling if needed
       ------------------------- */
    @media (max-width: 600px) {
      body {
        padding: 20px;
      }
      .departure-board {
        font-size: 20px; /* smaller font for narrowest screens */
        padding: 10px;
        overflow-x: auto; /* allow horizontal scrolling if columns don't fit */
      }
      .board-header {
        font-size: 26px;
      }
      .board-row {
        min-width: 650px; /* force scrolling if the screen is narrower than 650px */
      }
    }
  </style>
</head>
<body>
  <h1>DEPARTURE</h1>
  <h2>Aryorespati</h2>
  <div class="departure-board">
    <div class="board-header">Departures</div>
    <div id="board-content"></div>
  </div>
  <script>
    const destinations = [
      "Jakarta",
      "Delft",
      "New York",
      "Paris",
      "Tokyo",
      "Dubai",
      "Amsterdam",
      "Berlin",
      "Sydney",
      "Rome",
      "Spotify",
      "Apple Music",
      "Instagram",
    ];
    const gates = ["A1", "B2", "C3", "D4", "E5", "F6", "G7", "H8", "I9", "J10"];
    const statuses = [
      "ON TIME",
      "CHECK-IN",
      "BOARDING",
      "DEPARTURE",
      "DELAYED",
      "CANCELED",
    ];
    const airlines = ["GA", "KL", "AF", "BA", "SQ", "LH", "EK", "QR", "CX", "AA"];
    const destinationLinks = {
      Spotify:
        "https://open.spotify.com/track/5CPGzbFyIUsEnwq71jDQs4?si=dCrFum2ITk24oNzS3N3_vg&context=spotify%3Aalbum%3A1ovj44TIeuLD2sdg3PAq4d",
      "Apple Music":
        "https://music.apple.com/id/album/departure/1795314764?i=1795314920",
      Instagram: "https://instagram.com/aryorespatixavier",
    };

    function randomItem(array) {
      return array[Math.floor(Math.random() * array.length)];
    }

    function generateFlightNumber() {
      return randomItem(airlines) + "-" + Math.floor(100 + Math.random() * 900);
    }

    function generateRow(index) {
      let destination = randomItem(destinations);
      return {
        time: `${18 - Math.floor(index / 2)}:${
          index % 2 === 0 ? "30" : "00"
        }`,
        destination: destination,
        flightNumber: generateFlightNumber(),
        gate: randomItem(gates),
        status: "ON TIME",
        link: destinationLinks[destination] || null,
      };
    }

    function updateBoard() {
      const rows = document.querySelectorAll(".board-row .status");
      rows.forEach((statusCell, index) => {
        let probability = (15 - index) * 0.07;
        if (Math.random() < probability) {
          let currentText = statusCell.textContent.trim();
          let newStatus =
            currentText === "ON TIME"
              ? "CHECK-IN"
              : currentText === "CHECK-IN"
              ? "BOARDING"
              : currentText === "BOARDING"
              ? "DEPARTURE"
              : currentText === "DELAYED"
              ? Math.random() < 0.5
                ? "CANCELED"
                : "CHECK-IN"
              : currentText;

          // If final status is reached, remove row & add new
          if (newStatus === "CANCELED" || newStatus === "DEPARTURE") {
            setTimeout(() => {
              statusCell.parentElement.remove();
              addNewRow();
            }, 1000);
          }

          let newStatusClass = newStatus.toLowerCase().replace(" ", "");
          statusCell.className = `status ${newStatusClass}`;
          statusCell.innerHTML = `<span class="typewriter">${newStatus}</span>`;
        }
      });
    }

    function addNewRow() {
      const boardContent = document.getElementById("board-content");
      let newFlight = generateRow(14);
      let row = document.createElement("div");
      row.classList.add("board-row");

      if (newFlight.link) {
        row.classList.add("fake");
        row.onclick = () => window.open(newFlight.link, "_blank");
      }

      let statusClass = newFlight.status.toLowerCase().replace(" ", "");
      row.innerHTML = `
        <span>${newFlight.time}</span>
        <span>${newFlight.destination}</span>
        <span>${newFlight.flightNumber}</span>
        <span>${newFlight.gate}</span>
        <span class="status ${statusClass}">
          <span class="typewriter">${newFlight.status}</span>
        </span>
      `;
      boardContent.appendChild(row);
    }

    function generateBoardRows() {
      const boardContent = document.getElementById("board-content");
      boardContent.innerHTML = "";
      for (let i = 0; i < 15; i++) {
        let flight = generateRow(i);
        let row = document.createElement("div");
        row.classList.add("board-row");

        if (flight.link) {
          row.classList.add("fake");
          row.onclick = () => window.open(flight.link, "_blank");
        }

        let statusClass = flight.status.toLowerCase().replace(" ", "");
        row.innerHTML = `
          <span>${flight.time}</span>
          <span>${flight.destination}</span>
          <span>${flight.flightNumber}</span>
          <span>${flight.gate}</span>
          <span class="status ${statusClass}">
            <span class="typewriter">${flight.status}</span>
          </span>
        `;
        boardContent.appendChild(row);
      }
    }

    generateBoardRows();
    setInterval(updateBoard, 5000);
  </script>
</body>
</html>
